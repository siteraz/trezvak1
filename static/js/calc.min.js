var price_from_mo=50;var price_to_mo=50;var fixed_tax=1800;var city_tax=1800;var points=[{name:"выберите точку",dist:1,time:"--"},{name:"Балашиха",dist:6,time:"15"},{name:"Реутов",dist:2,time:"5"},{name:"Люберцы",dist:5,time:"12"},{name:"Котельники",dist:2,time:"4"},{name:"Дзержинский",dist:5,time:"9"},{name:"Лыткарино",dist:16,time:"26"},{name:"Видное",dist:5,time:"7"},{name:"Щербинка",dist:8,time:"12"},{name:"Коммунарка",dist:7,time:"12"},{name:"Московский",dist:10,time:"12"},{name:"Одинцово",dist:10,time:"11"},{name:"Красногорск",dist:5,time:"8"},{name:"Химки",dist:4,time:"10"},{name:"Долгопрудный",dist:6,time:"14"},{name:"Мытищи",dist:4,time:"10"},{name:"Королев",dist:10,time:"15"},];$(document).ready(make_options);function make_options()
{var option=$('<option/>');var i;var sel=0;for(i=0;i<points.length;i++)
{$('<option/>',{value:i}).text(points[i].name).appendTo('#point-sel');};$("#point-sel").change(point_change);$("#calc-dist").change(function()
{var val_km=parseInt($(this).val());$("#calc-price-to").html(human_price(val_km,price_to_mo));$("#calc-price-from").html(human_price(val_km,price_from_mo));});};function human_price(dist,price)
{var html;if(dist>0)
{html="<span class='pricehint' title='минимальная стоимость заказа'>";html+=fixed_tax+"</span> + "+dist*price+", <span>итого: <div class='calc_price'>"+(fixed_tax+(dist*price));html+="<i class='fa fa-rub'></i></div> </span>";}
else
{html="<span class='pricehint' title='фиксированный тариф'>Поездка по Мосвке</span>";html+=", <span>итого: <div class='calc_price'>"+city_tax;html+="<i class='fa fa-rub'></i></div> </span>";}
return html;};function point_change()
{sel=parseInt($("#point-sel").find(":selected").val())
$("#calc-dist").val(points[sel].dist);$("#calc-price-to").html(human_price(points[sel].dist,price_to_mo));$("#calc-price-from").html(human_price(points[sel].dist,price_from_mo));};function btn_dist_input(val)
{var plus_km=parseInt(val)
var val_km=parseInt($("#calc-dist").val())+plus_km
if(val_km>0)
{if(val_km>100){val_km=100};$("#calc-price-to").html(human_price(val_km,price_to_mo));$("#calc-price-from").html(human_price(val_km,price_from_mo));$("#calc-dist").val(val_km);};};